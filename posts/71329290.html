<!doctype html>
<html>

<head>
  <meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, minimum-scale=1.0, maximum-scale=1.0, user-scalable=no">
<meta name="keywords" content="" />
<link rel="stylesheet" href="/css/style.css" />

  <title>
创建类似 http://ithinkimight.com/ 随机大小排布界面 - Recordum
</title>
</head>

<body>

<div class="main">
<div class="inner">
  
<div class="header">
    <a class="logo" href="/">Recordum</a><!--

 --><div class="menu">
        <a href="/archives/">Archives</a><a href="/about/">About</a>
    </div>

    <div class="social">
        <a target="_blank" href="https://github.com/LoeiFy/Recordum/issues"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
<path d="M12,2A10,10 0 0,0 2,12C2,16.42 4.87,20.17 8.84,21.5C9.34,21.58 9.5,21.27 9.5,21C9.5,20.77 9.5,20.14 9.5,19.31C6.73,19.91 6.14,17.97 6.14,17.97C5.68,16.81 5.03,16.5 5.03,16.5C4.12,15.88 5.1,15.9 5.1,15.9C6.1,15.97 6.63,16.93 6.63,16.93C7.5,18.45 8.97,18 9.54,17.76C9.63,17.11 9.89,16.67 10.17,16.42C7.95,16.17 5.62,15.31 5.62,11.5C5.62,10.39 6,9.5 6.65,8.79C6.55,8.54 6.2,7.5 6.75,6.15C6.75,6.15 7.59,5.88 9.5,7.17C10.29,6.95 11.15,6.84 12,6.84C12.85,6.84 13.71,6.95 14.5,7.17C16.41,5.88 17.25,6.15 17.25,6.15C17.8,7.5 17.45,8.54 17.35,8.79C18,9.5 18.38,10.39 18.38,11.5C18.38,15.32 16.04,16.16 13.81,16.41C14.17,16.72 14.5,17.33 14.5,18.26C14.5,19.6 14.5,20.68 14.5,21C14.5,21.27 14.66,21.59 15.17,21.5C19.14,20.16 22,16.42 22,12A10,10 0 0,0 12,2Z"></path>
</svg></a><!--
    --><a target="_blank" href="/rss.xml"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
<path d="M6.18,15.64A2.18,2.18 0 0,1 8.36,17.82C8.36,19 7.38,20 6.18,20C5,20 4,19 4,17.82A2.18,2.18 0 0,1 6.18,15.64M4,4.44A15.56,15.56 0 0,1 19.56,20H16.73A12.73,12.73 0 0,0 4,7.27V4.44M4,10.1A9.9,9.9 0 0,1 13.9,20H11.07A7.07,7.07 0 0,0 4,12.93V10.1Z"></path>
</svg></a>
    </div>
</div>




<div id="post" class="center">

    <p class="time">March 30, 2017</p>

    <h1 class="title">创建类似 http://ithinkimight.com/ 随机大小排布界面</h1>

    <div class="content"><p><code>ithinkimight.com</code> 这个网站图片来自 Instagram，图片随机大小，位置也是随机，图片可以重叠，但是并没有 <strong>过分</strong> 重叠。这种随机大小，位置排版页面元素跟平常的整齐 <code>grid</code> 或者 <code>瀑布流</code> 风格很不一样，下面我们尝试一下实现类似效果</p>
<p>从网站源文件上看并不能看出网站是如何随机排布这些图片，因为是后端直接输出图片的位置参数，并不是前端实现的位置计算。不过这里有一种简单方法，可以实现类似效果。先看一下具体效果</p>
<h3 id="例子以及实际运用效果">例子以及实际运用效果</h3><p><a href="http://jsfiddle.net/am0200/1mn5xbf8/">http://jsfiddle.net/am0200/1mn5xbf8/</a></p>
<p><a href="http://stone.am0200.com/">http://stone.am0200.com/</a></p>
<h3 id="实现思路">实现思路</h3><p>首先把 container 划分为 4 个块，然后需要随机定位的 4 个块分别放到这 4 个区域，最后定义这 4 个块距离左边跟上边的最远，最近距离即可</p>
<h3 id="实现代码">实现代码</h3><p>html 部分，我们只是生成 4 个容器，每个容器都可以放置一张图片</p>

    <div class="hljs html">
      <table>
        <tbody>
          <tr>
            <td class="line">
              <pre><span>1</span>
<span>2</span>
<span>3</span>
<span>4</span>
<span>5</span>
<span>6</span>
</pre>
            </td>
            <td class="code"><pre>&lt;section&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d0"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d1"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d2"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
    &lt;<span class="hljs-keyword">div</span> <span class="hljs-built_in">id</span>=<span class="hljs-string">"d3"</span>&gt;&lt;/<span class="hljs-keyword">div</span>&gt;
&lt;/section&gt;</pre></td>
          </tr>
        </tbody>
      </table>
    </div>
  <p>css 部分，我们使用绝对定位来设置每个容器的主要位置</p>

    <div class="hljs css">
      <table>
        <tbody>
          <tr>
            <td class="line">
              <pre><span>1</span>
<span>2</span>
<span>3</span>
<span>4</span>
<span>5</span>
<span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
</pre>
            </td>
            <td class="code"><pre><span class="hljs-selector-tag">section</span> {
    <span class="hljs-attribute">width</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">height</span>: <span class="hljs-number">100%</span>;
    <span class="hljs-attribute">position</span>: relative;
}
<span class="hljs-selector-tag">section</span> <span class="hljs-selector-tag">div</span> {
    <span class="hljs-attribute">position</span>: absolute;
}
<span class="hljs-selector-id">#d0</span> {
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
}
<span class="hljs-selector-id">#d1</span> {
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
    <span class="hljs-attribute">left</span>: <span class="hljs-number">50%</span>;
}
<span class="hljs-selector-id">#d2</span> {
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">50%</span>;
}
<span class="hljs-selector-id">#d3</span> {
    <span class="hljs-attribute">left</span>: <span class="hljs-number">0</span>;
    <span class="hljs-attribute">top</span>: <span class="hljs-number">0</span>;
}</pre></td>
          </tr>
        </tbody>
      </table>
    </div>
  <p>js 部分，我们设置 4 个块随机大小，并且随机上下左右距离，需要注意的是，这个距离是有一定的范围的</p>

    <div class="hljs javascript">
      <table>
        <tbody>
          <tr>
            <td class="line">
              <pre><span>1</span>
<span>2</span>
<span>3</span>
<span>4</span>
<span>5</span>
<span>6</span>
<span>7</span>
<span>8</span>
<span>9</span>
<span>10</span>
<span>11</span>
<span>12</span>
<span>13</span>
<span>14</span>
<span>15</span>
<span>16</span>
<span>17</span>
<span>18</span>
<span>19</span>
<span>20</span>
<span>21</span>
<span>22</span>
<span>23</span>
<span>24</span>
<span>25</span>
<span>26</span>
<span>27</span>
<span>28</span>
<span>29</span>
<span>30</span>
<span>31</span>
<span>32</span>
<span>33</span>
<span>34</span>
<span>35</span>
<span>36</span>
<span>37</span>
<span>38</span>
<span>39</span>
<span>40</span>
<span>41</span>
<span>42</span>
<span>43</span>
<span>44</span>
<span>45</span>
</pre>
            </td>
            <td class="code"><pre><span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rd</span>(<span class="hljs-params">n,m</span>)</span>{
    <span class="hljs-keyword">var</span> c = m-n+<span class="hljs-number">1</span>;  
    <span class="hljs-keyword">return</span> <span class="hljs-built_in">Math</span>.floor(<span class="hljs-built_in">Math</span>.random() * c + n);
}

<span class="hljs-keyword">var</span> w = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'section'</span>).width()),
    h = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'section'</span>).height());

$(<span class="hljs-string">'div'</span>).each(<span class="hljs-function"><span class="hljs-keyword">function</span>(<span class="hljs-params"></span>) </span>{
    <span class="hljs-keyword">var</span> wh = rd(<span class="hljs-number">150</span>, <span class="hljs-number">200</span>)
    $(<span class="hljs-keyword">this</span>).css({
        <span class="hljs-attr">width</span>: wh,
        <span class="hljs-attr">height</span>: wh
    })
})

<span class="hljs-keyword">var</span> d0 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d0'</span>).width()),
    d1 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d1'</span>).width()),
    d2 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d2'</span>).width()),
    d3 = <span class="hljs-built_in">parseInt</span>($(<span class="hljs-string">'#d3'</span>).width());

<span class="hljs-keyword">var</span> a1 = rd(-(d0 / <span class="hljs-number">4</span>), w / <span class="hljs-number">2</span> - d0),
    a2 = rd(<span class="hljs-number">0</span>, h / <span class="hljs-number">2</span> - d0 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>);

<span class="hljs-keyword">var</span> b1 = rd(-(d1 / <span class="hljs-number">4</span>), w / <span class="hljs-number">2</span> - d1),
    b2 = rd(-(d1 / <span class="hljs-number">4</span>), h / <span class="hljs-number">2</span> - d1);

<span class="hljs-keyword">var</span> c1 = rd(<span class="hljs-number">0</span>, w / <span class="hljs-number">2</span> - d2 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>),
    c2 = rd(-(d2 / <span class="hljs-number">4</span>), h / <span class="hljs-number">2</span> - d2);    

<span class="hljs-keyword">var</span> e1 = rd(<span class="hljs-number">0</span>, w / <span class="hljs-number">2</span> - d3 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>),
    e2 = rd(<span class="hljs-number">0</span>, h / <span class="hljs-number">2</span> - d3 / <span class="hljs-number">4</span> * <span class="hljs-number">3</span>); 


$(<span class="hljs-string">'#d0'</span>).css(<span class="hljs-string">'margin-left'</span>, a1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d0'</span>).css(<span class="hljs-string">'margin-top'</span>, a2 +<span class="hljs-string">'px'</span>)

$(<span class="hljs-string">'#d1'</span>).css(<span class="hljs-string">'margin-left'</span>, b1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d1'</span>).css(<span class="hljs-string">'margin-top'</span>, b2 +<span class="hljs-string">'px'</span>)

$(<span class="hljs-string">'#d2'</span>).css(<span class="hljs-string">'margin-left'</span>, c1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d2'</span>).css(<span class="hljs-string">'margin-top'</span>, c2 +<span class="hljs-string">'px'</span>)

$(<span class="hljs-string">'#d3'</span>).css(<span class="hljs-string">'margin-left'</span>, e1 +<span class="hljs-string">'px'</span>)
$(<span class="hljs-string">'#d3'</span>).css(<span class="hljs-string">'margin-top'</span>, e2 +<span class="hljs-string">'px'</span>)</pre></td>
          </tr>
        </tbody>
      </table>
    </div>
  <h3 id="其他问题">其他问题</h3><p>这种定位简单方便，但是如果是单数块的时候，就要做一下相关处理了</p>
</div>

    <div class="comments">
        <div id="disqus_thread"></div>
    </div>

</div>


</div>
</div>

<div class="footer">
    <div class="center">Recordum / Powered by <a target="_blank" href="https://github.com/acyortjs/acyort">AcyOrt</a> & <a target="_blank" href="https://github.com">GitHub</a></div>
</div>







</body>
</html>
